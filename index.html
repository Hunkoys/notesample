<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Notability</title>
    <link rel="stylesheet" type="text/css" href="style.css">
   
</head>
<body>
    <div class="tool" id="T1">

    </div>

    <div class="tool" id="T2">
        
    </div>

    <div class="tool" id="T3">
        
    </div>

    <div class="tool" id="T4">
        
    </div>

    <div class="tool" id="T5">
        
    </div>

    <nav class="menu-bar">

    </nav>
    <header class="tabs-bar" draggable="true">
        <div class="dropdown">
            <span class="notebook-title">
                Biology
            </span>
            <div class="arrow">

            </div>
      </div>
    </header>
    <div id="work-area" onclick="foo(event)">
    </div>
    <div class="page-sidebar">

    </div>
</body>

<script>
    document.getElementById("work-area").addEventListener("click", e => { e.stopPropagation(); }, true)
    let activeElement;
    function foo(event) {
        if (activeElement === 'block')
    {
        activeElement = ''
    }
    else {
        let block = document.createElement('a')

        block.contentEditable = 'true'
        block.className = 'block'
        block.style = 'top:' + (event.clientY - 8) + 'px; left:' + event.clientX + 'px;'
        block.draggable = 'true'
        block.ondragstart = dragstart
        block.ondragend = dragend
        block.onblur = validate
        block.onmousemove = hover

        document.getElementById('work-area').appendChild(block).focus()
        activeElement = document.activeElement.className
        console.log(activeElement)
        }
    }

    function validate(e) {
        var caller = e.target || e.scrElement
        if (caller.innerHTML === "")
        {
           caller.remove()
        }
    }

    function hover(e) {
       if (e.clientX + 'px' > e.target.style.left && e.clientY + 'px' > e.target.style.top && (e.clientX - 10) + 'px' < e.target.style.left && (e.clientY - 100) + 'px' < e.target.style.top )
       {
            e.target.style.cursor = 'grab'
            
       }
       else {   
            e.target.style.cursor = 'text'
       }
    }

    function dragstart(e) {
    }

    function dragend(e) {
        e.target.style.left = e.clientX + 'px' 
        e.target.style.top = e.clientY + 'px'
    }

</script>
</html>